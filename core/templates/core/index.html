{% extends 'base.html' %}
{% load thumbnail %}
{% load static %}
{% load custom_filters %}
{% block content %}
    <div class="home">
        <div class="container my-3">
            {% if not user.is_authenticated %}
            <div class="jumbotron bg-dark text-light rounded w-100 my-3">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <h1 class="display-4">Hello gamer!</h1>
                            <p class="lead">This site was created in order to share friend codes for the nintendo switch platform.</p>
                            <hr class="my-4">
                            <p>If you want to start sharing, you need to create an account and fill out some necessary fields to start sharing.</p>
                            <a class="btn btn-info btn-lg" href="{% url 'account_signup' %}" role="button"><i class="fas fa-sign-in-alt fa-fw mr-1"></i> Sign up</a>
                        </div>
                    </div>                    
                </div> 
            </div>
            {% endif %}
            <div class="row">
                <div class="col-md-12">
                    <div class="bg-dark text-light rounded p-3">
                        <h3><i class="fas fa-th-large fa-fw text-info mr-1"></i> Latest codes</h3>
                        <p>These are the last friend codes published with the option to view them publicly.</p>
                        <div class="row mt-5">
                            <div class="col-md-6">
                                <h5><i class="fas fa-list-ul fa-fw text-info mr-1"></i> Lists By Game</h5>
                                <hr>
                            </div>
                            <div class="col-md-6">
                                <h5><i class="fas fa-users fa-fw text-info mr-1"></i> By User</h5>
                                <hr>
                                {% if users_public %}
                                    {% for object in users_public %}
                                        <div class="userthumb-home p-2">
                                            <div class="media">
                                                <a href="{% url 'userprofile' object.username %}">
                                                    <img src="{{ object.userprofile.avatar|thumbnail_url:'48x48'|default:'https://via.placeholder.com/48' }}" class="rounded mr-3" alt="{% if object.get_full_name %}{{ object.get_full_name }} - @{{ object.username }}{% else %}@{{ object.username }} avatar.{% endif %}">
                                                </a>
                                                <div class="media-body">
                                                    <h6 class="mt-0 mb-1">
                                                        {% if object.get_full_name %}{{ object.get_full_name }}{% else %}{{ object.username }}{% endif %}
                                                        <small class="username text-muted">
                                                            @{{ object.username }} {% if object.is_superuser %}<i class="fas fa-check-circle fa-fw fa-xs text-primary"></i>{% endif %}
                                                        </small>
                                                    </h6>
                                                    <span class="badge badge-danger mb-1">{{ object.userprofile.nintendo_switch_code|switch_code_formatter:'switch' }}</span>
                                                </div>
                                                <div class="media-body text-right small mt-1">
                                                    <h6 class="my-0">Game</h6>
                                                    <p class="mb-0">Animal Crossing: New Horizons</p>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                {% else %}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>            
            </div>
        </div>
    </div>
{% endblock %}